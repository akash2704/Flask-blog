{% extends "base.html" %}
{% block content %}
<h1>{{ post.title }}</h1>
<p>{{ post.content }}</p>
<p><em>By {{ post.author.name }} | {{ post.timestamp.strftime('%Y-%m-%d %H:%M') }}</em></p>

<hr>
<h3>Comments</h3>
{% for comment in post.comments %}
    <p><strong>{{ comment.author.name }}</strong>: {{ comment.content }} ({{ comment.timestamp.strftime('%Y-%m-%d %H:%M') }})</p>
{% else %}
    <p>No comments yet.</p>
{% endfor %}

{% if session.get('user_id') %}
<form method="POST">
    <textarea name="content" required></textarea><br>
    <button type="submit">Add Comment</button>
</form>
{% endif %}
{% endblock %}
